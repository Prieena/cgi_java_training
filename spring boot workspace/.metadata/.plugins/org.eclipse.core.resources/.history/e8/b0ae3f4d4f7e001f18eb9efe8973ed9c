package com.controller;

import java.util.List;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Controller;
import org.springframework.ui.Model;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RequestMethod;

import com.bean.Account;
import com.service.AccountService;

import jakarta.servlet.http.HttpServletRequest;

@Controller
public class AccountController {

	@Autowired
	AccountService accountService;
	
	@RequestMapping(value = "/",method = RequestMethod.GET)
	public String openIndexPage() {   // DI
		return "index";
	}
	@RequestMapping(value = "createaccpage")
	public String createAccountPage(Model model,Account account) {   // DI
		model.addAttribute("acc", account);
		String result = "";
//		String butonValue = req.getParameter("submitButton");
//		if(butonValue.equals("Store Employee")) {
//			result = employeeService.storeEmployee(employee);
//			System.out.println(result);	
//		}else {
		// result = employeeService.updateEmployeeById(employee);
		// model.addAttribute("buttonValue", "Store Employee");
//		}
//		List<Employee> listOfEmployee = employeeService.findAllEmployees();
//		model.addAttribute("listofemployee", listOfEmployee);
//		model.addAttribute("msg", result);
//			employee.setEid(0);
//			employee.setEname("");
//			employee.setSalary(0.0f);
//		model.addAttribute("emp", employee);
		return "createaccpage";
	}

	@RequestMapping(value = "/createacc",method = RequestMethod.POST)
	public String createAccount(Model model,Account account,HttpServletRequest req) {   // DI
		String result = "";
	//	String butonValue = req.getParameter("submitButton");
	//	if(butonValue.equals("Store Employee")) {
		result = accountService.createAccount(account);
	//		System.out.println(result);	
	//	}else {
		// result = employeeService.updateEmployeeById(employee);
		// model.addAttribute("buttonValue", "Store Employee");
//		}
	//	List<Employee> listOfEmployee = employeeService.findAllEmployees();
	//	model.addAttribute("listofemployee", listOfEmployee);
		model.addAttribute("msg", result);
		account.setAccno(0);
		account.setName("");
		account.setAmount(0.0f);
		model.addAttribute("acc", account);
		return "createaccpage";
	}
}
